<!doctype html>

<html ng-app="Braid" ng-controller="mainController as mainCtrl">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <base href="/">

    <title ng-bind="mainCtrl.page_title">Braid</title>

    <link rel="shortcut icon" href="/img/poop_logo.ico">

    <script src="/bower_components/angular/angular.js"></script>
    <script src="/bower_components/angular-route/angular-route.min.js"></script>
    <script src="/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/bower_components/underscore/underscore-min.js"></script>
    <script src="/bower_components/objectid.js/src/main/javascript/Objectid.js"></script>
    <script src="/bower_components/socket.io-client/socket.io.js"></script>
    <script src="/bower_components/angular-socket-io/socket.min.js"></script>
    <script src="/bower_components/angular-scroll-glue/src/scrollglue.js"></script>
    <script src="/bower_components/angular-sanitize/angular-sanitize.min.js"></script>
    <script src="/bower_components/angular-animate/angular-animate.min.js"></script>
    <script src="/js/controllers/main.js"></script>
    <script src="/js/directives/enter_submit.js"></script>
    <script src="/js/directives/navbar.js"></script>
    <script src="/js/directives/register.js"></script>
    <script src="/js/directives/login.js"></script>
    <script src="/js/directives/logout.js"></script>
    <script src="/js/directives/messages.js"></script>
    <script src="/js/directives/friendships.js"></script>
    <script src="/js/directives/queue.js"></script>
    <script src="/js/filters/main.js"></script>
    <script src="/js/services/focus.js"></script>
    <script src="/js/services/socket.js"></script>
    <script src="/js/services/auth.js"></script>
    <script src="/js/services/messages.js"></script>
    <script src="/js/services/strands.js"></script>
    <script src="/js/services/convos.js"></script>
    <script src="/js/services/users.js"></script>
    <script src="/js/services/friendships.js"></script>
    <script src="/js/services/helpers.js"></script>
    <script src="/js/core.js"></script>

    <link rel="stylesheet" href="/css/bootstrap.min.css"> <!-- Bootswatch Yeti -->
    <link rel="stylesheet" href="/css/font-awesome-4.6.3/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/customize_bootstrap.css">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/messages.css">
    <link rel="stylesheet" href="/css/friendships.css">
    <link rel="stylesheet" href="/css/queue.css">
    <link rel="stylesheet" href="/css/auth.css">
    <link rel="stylesheet" href="/css/navbar.css">
    <link rel="stylesheet" href="/css/logout.css">
    <link rel="stylesheet" href="/css/typing_indicator.css">

</head>


<body>

    <braid-navbar login_object="mainCtrl.login_object"
                  selected_user="mainCtrl.selected_user"
                  page_title="mainCtrl.page_title"
                  sound_on="mainCtrl.sound_on">
    </braid-navbar>

    <div id="main-content" class="container-fluid">
    <div id="margin-fixer-grid-wrapper">

        <div id="chat-view" ng-if="mainCtrl.selected_user">
            <div class="row">
                <div class="col-sm-2 col-sm-offset-2">
                    <braid-queue messages="mainCtrl.messages"
                                 strands="mainCtrl.strands"
                                 num_messages="mainCtrl.num_messages"
                                 selected_strand="mainCtrl.selected_strand"
                                 selected_convo="mainCtrl.selected_convo"
                                 selected_user="mainCtrl.selected_user"
                                 strand_map="mainCtrl.strand_map"
                                 friend_user_map="mainCtrl.friend_user_map">
                    </braid-queue>
                </div>

                <div id="message-view-col" class="col-sm-6">
                    <braid-messages messages="mainCtrl.messages"
                                    strands="mainCtrl.strands"
                                    num_messages="mainCtrl.num_messages"
                                    selected_strand="mainCtrl.selected_strand"
                                    selected_convo="mainCtrl.selected_convo"
                                    selected_user="mainCtrl.selected_user"
                                    strand_map="mainCtrl.strand_map"
                                    friend_user_map="mainCtrl.friend_user_map"
                                    page_title="mainCtrl.page_title"
                                    sound_on="mainCtrl.sound_on">
                    </braid-messages>
                </div>

                <div class="col-sm-2">
                    <braid-friendships friend_users="mainCtrl.friend_users"
                                       friendships="mainCtrl.friendships"
                                       selected_convo="mainCtrl.selected_convo"
                                       selected_user="mainCtrl.selected_user"
                                       friend_user_map="mainCtrl.friend_user_map">
                    </braid-friendships>
                </div>
            </div>
        </div>


        <div id="auth-view" ng-if="!mainCtrl.selected_user">
            <div class="row">
                <div class="col-sm-4">
                    <braid-register ng-hide="mainCtrl.login_object"
                                    selected_user="mainCtrl.selected_user"
                                    login_object="mainCtrl.login_object">
                    </braid-register>

                    <braid-login ng-show="mainCtrl.login_object"
                                 selected_user="mainCtrl.selected_user"
                                 login_object="mainCtrl.login_object">
                    </braid-login>
                </div>
            </div>
        </div>

    </div>
    </div>

</body>

</html>
